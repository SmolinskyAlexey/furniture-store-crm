<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ - CRM –ú–µ–±–µ–ª—å–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω</title>
    <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body>
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ -->
    <div class="modal active" id="writeOffModal">
        <div class="modal-content">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="menu-icon">üì¶</i>
                    –°–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
                </h3>
                <button class="modal-close" type="button">√ó</button>
            </div>

            <!-- –¢–µ–ª–æ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
            <div class="modal-body">
                <div class="content-grid">
                    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ø–∏—Å–∞–Ω–∏–∏ -->
                    <div class="section">
                        <div class="section-title">
                            <i>üìã</i>
                            –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ø–∏—Å–∞–Ω–∏–∏
                        </div>

                        <div class="form-group">
                            <label class="form-label">–¢–æ–≤–∞—Ä *</label>
                            <select class="form-input" name="product_id" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä</option>
                                <option value="1">–î–∏–≤–∞–Ω —É–≥–ª–æ–≤–æ–π "–ö–æ–º—Ñ–æ—Ä—Ç" (–ê—Ä—Ç–∏–∫—É–ª: DIV-001)</option>
                                <option value="2">–ö—Ä–µ—Å–ª–æ –æ—Ñ–∏—Å–Ω–æ–µ "–ü—Ä–µ—Å—Ç–∏–∂" (–ê—Ä—Ç–∏–∫—É–ª: ARM-002)</option>
                                <option value="3">–°—Ç–æ–ª –ø–∏—Å—å–º–µ–Ω–Ω—ã–π "–ö–ª–∞—Å—Å–∏–∫" (–ê—Ä—Ç–∏–∫—É–ª: TAB-003)</option>
                                <option value="4">–®–∫–∞—Ñ-–∫—É–ø–µ "–ú–æ–¥–µ—Ä–Ω" (–ê—Ä—Ç–∏–∫—É–ª: WAR-004)</option>
                            </select>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ *</label>
                                <input type="number" class="form-input" name="quantity" min="1" value="1" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">–°–∫–ª–∞–¥ —Å–ø–∏—Å–∞–Ω–∏—è *</label>
                                <select class="form-input" name="warehouse_id" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–∫–ª–∞–¥</option>
                                    <option value="1">–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥</option>
                                    <option value="2">–°–∫–ª–∞–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤</option>
                                    <option value="3">–í—ã—Å—Ç–∞–≤–æ—á–Ω—ã–π –∑–∞–ª</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">–ü—Ä–∏—á–∏–Ω–∞ —Å–ø–∏—Å–∞–Ω–∏—è *</label>
                            <select class="form-input" name="reason" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É</option>
                                <option value="defect">–ë—Ä–∞–∫</option>
                                <option value="theft">–ö—Ä–∞–∂–∞</option>
                                <option value="loss">–£—Ç–µ—Ä—è</option>
                                <option value="damage">–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ</option>
                                <option value="expiry">–ò—Å—Ç–µ—á–µ–Ω–∏–µ —Å—Ä–æ–∫–∞</option>
                                <option value="other">–î—Ä—É–≥–æ–µ</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
                            <textarea class="form-input" name="comment" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏—á–∏–Ω–µ —Å–ø–∏—Å–∞–Ω–∏—è..."></textarea>
                        </div>
                    </div>

                    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <div class="section">
                        <div class="section-title">
                            <i>‚ÑπÔ∏è</i>
                            –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                        </div>

                        <div class="info-grid">
                            <div class="info-card">
                                <div class="info-card-label">–ú–µ–Ω–µ–¥–∂–µ—Ä</div>
                                <div class="info-card-value">–ò–≤–∞–Ω–æ–≤ –ò.–ò.</div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-label">–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</div>
                                <div class="info-card-value">20.06.2025 14:35</div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-label">–°—Ç–∞—Ç—É—Å</div>
                                <div class="info-card-value">
                                    <span class="status-badge status-draft">–ß–µ—Ä–Ω–æ–≤–∏–∫</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group" style="margin-top: 16px;">
                            <label class="form-label">–ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞</label>
                            <input type="text" class="form-input" value="–°–ü-000001" disabled>
                        </div>

                        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ) -->
                        <div class="info-card" style="margin-top: 16px; display: none;" id="productInfo">
                            <div class="info-card-label">–û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥–µ</div>
                            <div class="info-card-value" id="stockBalance">-</div>
                            <div class="info-card-label" style="margin-top: 8px;">–¶–µ–Ω–∞ –∑–∞–∫—É–ø–∫–∏</div>
                            <div class="info-card-value" id="purchasePrice">-</div>
                        </div>
                    </div>
                </div>

                <!-- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ —Å–ø–∏—Å–∞–Ω–∏–∏ -->
                <div class="notification-card" style="margin-top: 20px;">
                    <div class="notification-icon">‚ö†Ô∏è</div>
                    <div class="notification-message">
                        <strong>–í–Ω–∏–º–∞–Ω–∏–µ!</strong> –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≤–∞—Ä –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω —Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Å–∫–ª–∞–¥–∞. –î–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.
                    </div>
                </div>
            </div>

            <!-- –ü–æ–¥–≤–∞–ª –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
            <div class="modal-footer">
                <div class="order-total-info">
                    <div class="summary-row">
                        <span>–°—É–º–º–∞ —Å–ø–∏—Å–∞–Ω–∏—è:</span>
                        <strong id="writeOffAmount">0 ‚ÇΩ</strong>
                    </div>
                </div>

                <div class="modal-footer-buttons">
                    <button type="button" class="btn btn-secondary">
                        <i>‚ùå</i>
                        –û—Ç–º–µ–Ω–∞
                    </button>
                    <button type="button" class="btn btn-primary">
                        <i>üíæ</i>
                        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ø–∏—Å–∞–Ω–∏–µ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
    <div class="main-content">
        <div class="top-bar">
            <h1 class="page-title">–°–∫–ª–∞–¥ - –°–ø–∏—Å–∞–Ω–∏—è</h1>
            <div class="top-actions">
                <button class="btn btn-primary" onclick="document.getElementById('writeOffModal').style.display='flex'">
                    <i>‚ûï</i>
                    –°–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–∞–Ω–∏–µ
                </button>
            </div>
        </div>

        <div class="content-area">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">–î–æ–∫—É–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∞–Ω–∏—è</h3>
                </div>

                <table class="table">
                    <thead>
                        <tr>
                            <th>‚Ññ –¥–æ–∫—É–º–µ–Ω—Ç–∞</th>
                            <th>–î–∞—Ç–∞</th>
                            <th>–¢–æ–≤–∞—Ä</th>
                            <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                            <th>–ü—Ä–∏—á–∏–Ω–∞</th>
                            <th>–°—É–º–º–∞</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>–°–ü-000001</td>
                            <td>20.06.2025</td>
                            <td>–î–∏–≤–∞–Ω —É–≥–ª–æ–≤–æ–π "–ö–æ–º—Ñ–æ—Ä—Ç"</td>
                            <td>1 —à—Ç.</td>
                            <td>–ë—Ä–∞–∫</td>
                            <td>25 000 ‚ÇΩ</td>
                            <td><span class="badge badge-warning">–í –æ–±—Ä–∞–±–æ—Ç–∫–µ</span></td>
                            <td>
                                <div class="actions-wrapper">
                                    <button class="btn-icon btn-secondary" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">üëÅÔ∏è</button>
                                    <button class="btn-icon btn-primary" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">‚úèÔ∏è</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>–°–ü-000002</td>
                            <td>19.06.2025</td>
                            <td>–ö—Ä–µ—Å–ª–æ –æ—Ñ–∏—Å–Ω–æ–µ "–ü—Ä–µ—Å—Ç–∏–∂"</td>
                            <td>2 —à—Ç.</td>
                            <td>–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ</td>
                            <td>18 000 ‚ÇΩ</td>
                            <td><span class="badge badge-success">–ü—Ä–æ–≤–µ–¥–µ–Ω</span></td>
                            <td>
                                <div class="actions-wrapper">
                                    <button class="btn-icon btn-secondary" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">üëÅÔ∏è</button>
                                    <button class="btn-icon btn-info" title="–ü–µ—á–∞—Ç—å">üñ®Ô∏è</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // –ü—Ä–æ—Å—Ç—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            document.querySelector('.modal-close').addEventListener('click', function() {
                document.getElementById('writeOffModal').style.display = 'none';
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            document.getElementById('writeOffModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.style.display = 'none';
                }
            });

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–≤–∞—Ä–µ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ
            document.querySelector('select[name="product_id"]').addEventListener('change', function() {
                const productInfo = document.getElementById('productInfo');
                const stockBalance = document.getElementById('stockBalance');
                const purchasePrice = document.getElementById('purchasePrice');
                const writeOffAmount = document.getElementById('writeOffAmount');

                if (this.value) {
                    productInfo.style.display = 'block';
                    
                    // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                    switch(this.value) {
                        case '1':
                            stockBalance.textContent = '5 —à—Ç.';
                            purchasePrice.textContent = '22 000 ‚ÇΩ';
                            writeOffAmount.textContent = '22 000 ‚ÇΩ';
                            break;
                        case '2':
                            stockBalance.textContent = '12 —à—Ç.';
                            purchasePrice.textContent = '8 500 ‚ÇΩ';
                            writeOffAmount.textContent = '8 500 ‚ÇΩ';
                            break;
                        case '3':
                            stockBalance.textContent = '3 —à—Ç.';
                            purchasePrice.textContent = '15 000 ‚ÇΩ';
                            writeOffAmount.textContent = '15 000 ‚ÇΩ';
                            break;
                        case '4':
                            stockBalance.textContent = '2 —à—Ç.';
                            purchasePrice.textContent = '35 000 ‚ÇΩ';
                            writeOffAmount.textContent = '35 000 ‚ÇΩ';
                            break;
                    }
                } else {
                    productInfo.style.display = 'none';
                    writeOffAmount.textContent = '0 ‚ÇΩ';
                }
            });

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É–º–º—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
            document.querySelector('input[name="quantity"]').addEventListener('input', function() {
                const productSelect = document.querySelector('select[name="product_id"]');
                const quantity = parseInt(this.value) || 0;
                const writeOffAmount = document.getElementById('writeOffAmount');

                if (productSelect.value && quantity > 0) {
                    let price = 0;
                    switch(productSelect.value) {
                        case '1': price = 22000; break;
                        case '2': price = 8500; break;
                        case '3': price = 15000; break;
                        case '4': price = 35000; break;
                    }
                    writeOffAmount.textContent = (price * quantity).toLocaleString() + ' ‚ÇΩ';
                } else {
                    writeOffAmount.textContent = '0 ‚ÇΩ';
                }
            });
        });
    </script>
</body>
</html>